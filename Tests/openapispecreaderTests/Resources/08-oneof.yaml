openapi: 3.0.3
info: { title: Combinators, version: "1.0" }
paths:
  /shape:
    post:
      operationId: createShape
      requestBody:
        required: true
        content:
          application/json:
            schema:
              oneOf:
                - $ref: "#/components/schemas/Circle"
                - $ref: "#/components/schemas/Square"
      responses: { "200": { description: ok } }
components:
  schemas:
    Circle:
      type: object
      properties: { r: { type: number, minimum: 0 } }
      required: [r]
    Square:
      type: object
      properties: { a: { type: number, minimum: 0 } }
      required: [a]

Expected: Sample nimmt Circle (1. Option) → {"r":0}.
Wenn du allOf testen willst, ergänze:

Pet:
  allOf:
    - $ref: "#/components/schemas/Base"
    - type: object
      properties: { tag: { type: string } }
Base:
  type: object
  properties: { id: { type: integer }, name: { type: string } }
  required: [id, name]
